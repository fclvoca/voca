<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FCL Premium Smart Voca</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700;800&display=swap');

        :root {
            --fcl-navy: #1A237E; /* í—¤ë“œ ë¶€ë¶„ ë‚¨ìƒ‰ */
            --fcl-orange: #FF9800; /* ëœ» ìˆ¨ê¸°ê¸° ì˜¤ë Œì§€ìƒ‰ */
            --fcl-bg: #F5F7F9; /* ì „ì²´ ë°°ê²½ì€ ì—°í•œ íšŒìƒ‰ */
            --text-dark: #1E293B;
        }

        body { 
            font-family: 'Pretendard', sans-serif; 
            background-color: var(--fcl-bg); 
            margin: 0; padding: 0; color: var(--text-dark);
        }

        .container { max-width: 800px; margin: 0 auto; }

        /* [Header: ìƒë‹¨ì—ë§Œ ë‚¨ìƒ‰ ë°°ê²½ ì ìš©] */
        .header-section {
            background-color: var(--fcl-navy);
            padding: 15px 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .top-row { display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 12px; }
        .voca-title { color: white; font-weight: 800; font-size: 18px; white-space: nowrap; }
        
        .search-box { flex: 1; position: relative; }
        .search-input { 
            width: 100%; height: 40px; padding: 0 15px; border-radius: 8px;
            border: none; font-size: 14px; outline: none;
        }

        .btn-hide { 
            background-color: var(--fcl-orange); color: white; border: none;
            padding: 0 20px; height: 40px; border-radius: 8px; font-weight: 800;
            cursor: pointer; white-space: nowrap; transition: 0.2s;
        }

        /* [ê´€ë¦¬ì í†µê³„ ë° ì œì–´ ë°”] */
        .admin-bar {
            background: rgba(255,255,255,0.1); padding: 8px 20px;
            display: flex; gap: 10px; align-items: center;
        }
        .admin-btn {
            padding: 6px 14px; border-radius: 6px; border: none;
            color: white; font-size: 13px; font-weight: 700; cursor: pointer;
        }
        .btn-add { background: #448AFF; }
        .btn-del { background: #FF5252; }
        .stat-text { color: #FFECB3; font-size: 13px; font-weight: 600; margin-left: auto; }

        /* [í˜ì´ì§€ë„¤ì´ì…˜: ì¢Œìš° ì—¬ë°± 5mm ë° ê°€ë“ ì°¬ ì‚¬ê° ìƒì ìŠ¤íƒ€ì¼] */
        .page-wrapper { padding: 15px 5mm; background: #FFF; border-bottom: 1px solid #E2E8F0; }
        .page-container { display: flex; align-items: center; justify-content: space-between; gap: 4px; }
        
        .p-btn { 
            flex: 1; height: 40px; border: 1px solid #E2E8F0;
            background: white; color: #475569; border-radius: 6px;
            font-size: 15px; font-weight: 700; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
        }
        .p-btn.active { background-color: #2563EB; color: white; border-color: #2563EB; }
        .p-btn.nav { background-color: #F8FAFC; color: #2563EB; flex: 1.2; font-size: 18px; }

        /* [ë‹¨ì–´ ë¦¬ìŠ¤íŠ¸ ë””ìì¸] */
        .word-list { padding: 15px; }
        .word-item { 
            background: white; margin-bottom: 10px; border-radius: 12px;
            display: flex; align-items: center; padding: 18px 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); border: 1px solid #EDF2F7;
        }
        .check-circle { 
            width: 24px; height: 24px; border-radius: 50%; border: 2px solid #CBD5E0;
            margin-right: 15px; cursor: pointer; flex-shrink: 0;
        }
        .check-circle.active { background: var(--fcl-orange); border-color: var(--fcl-orange); }

        .word-content { flex: 1; cursor: pointer; }
        .eng-text { font-size: 21px; font-weight: 800; color: #0F172A; }
        .pro-text { font-size: 14px; color: #94A3B8; font-style: italic; margin-top: 4px; display: block; }
        
        .kor-text { 
            color: #1E293B; font-weight: 700; font-size: 17px;
            background: #F8FAFC; padding: 12px 15px; border-radius: 10px;
            min-width: 140px; text-align: center; cursor: pointer; border: 1px solid #E2E8F0;
        }
        .kor-text.hidden { background: #EDF2F7; color: transparent; border-color: #CBD5E0; }

        .total-info { text-align: center; padding: 10px; font-size: 13px; color: #64748B; font-weight: 600; }
    </style>
</head>
<body>

<div class="container">
    <div class="header-section">
        <div class="top-row">
            <div class="voca-title">ğŸ“– FCL_ìš°ì„ ìˆœìœ„ ì˜ë‹¨ì–´</div>
            <button onclick="toggleHide()" class="btn-hide" id="hideBtn">ëœ» ìˆ¨ê¸°ê¸°</button>
        </div>
        <div class="top-row">
            <div class="search-box">
                <input type="text" id="wordSearch" class="search-input" placeholder="ì´ë™í•  ë‹¨ì–´ ê²€ìƒ‰..." oninput="searchWord()">
            </div>
            <div style="color:white; font-size:12px;">ì†ë„ <input type="range" id="rateRange" min="0.5" max="1.2" step="0.1" value="0.8" style="vertical-align:middle; width:60px;"></div>
        </div>
    </div>

    <div class="admin-bar">
        <button class="admin-btn btn-add" onclick="addVoca()">ì¶”ê°€</button>
        <button class="admin-btn btn-del" onclick="deleteVoca()">ì‚­ì œ</button>
        <div class="stat-text">ì˜¤ëŠ˜ ë°©ë¬¸: <span id="vCount">0</span>ëª… | í‰ê· : <span id="aTime">0</span>ë¶„</div>
    </div>

    <div class="page-wrapper">
        <div id="pageBtns" class="page-container"></div>
        <div id="pageInfo" class="total-info"></div>
    </div>

    <div id="wordDisplay" class="word-list"></div>
</div>

<script>
    const API = "https://script.google.com/macros/s/AKfycbxKOMLlSkyVPgEjmpRO0njboqqUjrhO8IRrGZMWrQ9ToTRBRfaHfz2I8mukDt7LrdwO/exec";
    let allWords = [];
    let nowPage = 1;
    const perPage = 50;
    const groupSize = 10; // 10í˜ì´ì§€ì”© ë¬¶ìŒ
    let hideAll = false;

    async function init() {
        try {
            const res = await fetch(API + "?v=" + Date.now());
            const data = await res.json();
            allWords = data.map(v => ({ eng: v.english, kor: v.korean, pro: v.pronunciation }));
            
            // í†µê³„ ì‹œë®¬ë ˆì´ì…˜
            document.getElementById('vCount').innerText = Math.floor(Math.random() * 50) + 100;
            document.getElementById('aTime').innerText = Math.floor(Math.random() * 10) + 10;
            
            drawUI();
        } catch (e) {
            document.getElementById('wordDisplay').innerHTML = "ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨";
        }
    }

    function drawUI() {
        drawWords();
        drawPages();
    }

    function drawWords() {
        const display = document.getElementById('wordDisplay');
        display.innerHTML = "";
        const start = (nowPage - 1) * perPage;
        const slice = allWords.slice(start, start + perPage);

        slice.forEach((w) => {
            const div = document.createElement('div');
            div.className = 'word-item';
            div.innerHTML = `
                <div class="check-circle" onclick="this.classList.toggle('active')"></div>
                <div class="word-content" onclick="play('${w.eng}')">
                    <span class="eng-text">${w.eng}</span>
                    <span class="pro-text">${w.pro}</span>
                </div>
                <div class="kor-text ${hideAll ? 'hidden' : ''}" onclick="this.classList.toggle('hidden')">
                    ${w.kor}
                </div>
            `;
            display.appendChild(div);
        });
    }

    function drawPages() {
        const container = document.getElementById('pageBtns');
        container.innerHTML = "";
        const totalP = Math.ceil(allWords.length / perPage);
        
        // 10í˜ì´ì§€ ë‹¨ìœ„ ê³„ì‚°
        const currentGroup = Math.ceil(nowPage / groupSize);
        const startP = (currentGroup - 1) * groupSize + 1;
        const endP = Math.min(totalP, startP + groupSize - 1);

        // ì´ì „ 10í˜ì´ì§€ ë²„íŠ¼
        if (currentGroup > 1) {
            container.appendChild(makeBtn("Â«", startP - 1, "nav"));
        }

        for (let i = startP; i <= endP; i++) {
            const btn = makeBtn(i, i);
            if (i === nowPage) btn.classList.add('active');
            container.appendChild(btn);
        }

        // ë‹¤ìŒ 10í˜ì´ì§€ ë²„íŠ¼
        if (endP < totalP) {
            container.appendChild(makeBtn("Â»", endP + 1, "nav"));
        }

        document.getElementById('pageInfo').innerText = `ì´ ${allWords.length}ê°œ ë‹¨ì–´ ì¤‘ ${(nowPage-1)*perPage+1}~${Math.min(nowPage*perPage, allWords.length)} í‘œì‹œ`;
    }

    function makeBtn(txt, p, cls) {
        const b = document.createElement('button');
        b.className = 'p-btn ' + (cls || "");
        b.innerText = txt;
        b.onclick = () => { nowPage = p; drawUI(); window.scrollTo(0,0); };
        return b;
    }

    function toggleHide() {
        hideAll = !hideAll;
        document.getElementById('hideBtn').innerText = hideAll ? "ëœ» ë³´ì´ê¸°" : "ëœ» ìˆ¨ê¸°ê¸°";
        drawWords();
    }

    function play(t) {
        window.speechSynthesis.cancel();
        const m = new SpeechSynthesisUtterance(t);
        m.lang = 'en-US';
        m.rate = document.getElementById('rateRange').value;
        window.speechSynthesis.speak(m);
    }

    function addVoca() {
        const name = prompt("ìƒˆ ë‹¨ì–´ì¥ ì´ë¦„:");
        if(name) alert(`'${name}' ë‹¨ì–´ì¥ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`);
    }

    function deleteVoca() {
        if(confirm("í˜„ì¬ ë‹¨ì–´ì¥ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) alert("ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
    }

    init();
</script>
</body>
</html>
