<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FCL_Voca2 - 고등학교 영어 단어장</title>
    <style>
        body { font-family: 'Malgun Gothic', sans-serif; line-height: 1.6; padding: 20px; max-width: 800px; margin: auto; background-color: #f9f9f9; }
        .container { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; text-align: center; border-bottom: 2px solid #3498db; padding-bottom: 10px; }
        .admin-section { margin-top: 30px; padding: 20px; border: 1px dashed #bdc3c7; border-radius: 5px; background: #fdfdfd; }
        .stats-box { display: flex; justify-content: space-around; background: #ecf0f1; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
        input, button { padding: 10px; margin: 5px 0; border-radius: 5px; border: 1px solid #ddd; }
        button { cursor: pointer; background-color: #3498db; color: white; border: none; transition: 0.3s; }
        button:hover { background-color: #2980b9; }
        .delete-btn { background-color: #e74c3c; }
        .delete-btn:hover { background-color: #c0392b; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #f2f2f2; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container">
    <h1 id="vocaTitle">FCL 영어 단어장 2</h1>

    <div id="mainView">
        <div id="wordListArea">
            <p>데이터를 불러오는 중입니다...</p>
        </div>
        <button onclick="showAdminAuth()">관리자 모드 진입</button>
    </div>

    <div id="adminAuth" class="hidden">
        <h3>관리자 확인</h3>
        <input type="password" id="adminPw" placeholder="비밀번호 입력">
        <button onclick="checkAdminPw()">확인</button>
        <button onclick="hideAdminAuth()">취소</button>
    </div>

    <div id="adminPanel" class="hidden admin-section">
        <h2>관리자 모드</h2>
        
        <div class="stats-box">
            <div>총 단어 수: <span id="totalWords">0</span>개</div>
            <div>오늘 학습 예정: <span id="todayWords">0</span>개</div>
        </div>

        <div class="edit-section">
            <h3>단어장 설정 및 추가</h3>
            <input type="text" id="newVocaName" placeholder="새 단어장 이름">
            <button onclick="updateVocaName()">이름 변경</button>
            <br><br>
            <input type="text" id="wordInput" placeholder="단어 (English)">
            <input type="text" id="meanInput" placeholder="의미 (Korean)">
            <button onclick="addWord()">단어 추가</button>
        </div>

        <div id="adminWordList">
            </div>
        
        <button onclick="exitAdmin()">관리자 모드 종료</button>
    </div>
</div>

<script>
    // 구글 시트 연동 설정 (기존 단어장과 동일한 정보 입력)
    const SHEET_ID = 'YOUR_GOOGLE_SHEET_ID_HERE'; // 기존 시트 ID 입력
    const API_KEY = 'YOUR_API_KEY_HERE'; // 기존 API KEY 입력
    const RANGE = 'Sheet1!A:B'; // 불러올 범위

    let vocabularyData = [];
    const ADMIN_PW = "5857";

    // 초기 데이터 로드
    async function fetchWords() {
        try {
            const url = `https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${RANGE}?key=${API_KEY}`;
            const response = await fetch(url);
            const data = await response.json();
            vocabularyData = data.values || [];
            renderWords();
            updateStats();
        } catch (error) {
            console.error("데이터 로드 실패:", error);
        }
    }

    // 화면에 단어 표시
    function renderWords() {
        const area = document.getElementById('wordListArea');
        if (vocabularyData.length === 0) {
            area.innerHTML = "<p>등록된 단어가 없습니다.</p>";
            return;
        }
        let html = "<table><tr><th>단어</th><th>의미</th></tr>";
        vocabularyData.forEach(row => {
            html += `<tr><td>${row[0]}</td><td>${row[1]}</td></tr>`;
        });
        html += "</table>";
        area.innerHTML = html;
    }

    // 관리자 기능: 통계 업데이트
    function updateStats() {
        document.getElementById('totalWords').innerText = vocabularyData.length;
        document.getElementById('todayWords').innerText = Math.floor(vocabularyData.length * 0.2); // 예시 통계
    }

    // 관리자 모드 제어
    function showAdminAuth() { document.getElementById('adminAuth').classList.remove('hidden'); }
    function hideAdminAuth() { document.getElementById('adminAuth').classList.add('hidden'); }

    function checkAdminPw() {
        const input = document.getElementById('adminPw').value;
        if (input === ADMIN_PW) {
            document.getElementById('adminAuth').classList.add('hidden');
            document.getElementById('mainView').classList.add('hidden');
            document.getElementById('adminPanel').classList.remove('hidden');
            renderAdminList();
        } else {
            alert("비밀번호가 올바르지 않습니다.");
        }
    }

    function exitAdmin() {
        document.getElementById('adminPanel').classList.add('hidden');
        document.getElementById('mainView').classList.remove('hidden');
    }

    // 관리자 모드: 단어장 이름 수정
    function updateVocaName() {
        const newName = document.getElementById('newVocaName').value;
        if (newName) {
            document.getElementById('vocaTitle').innerText = newName;
            alert("단어장 이름이 변경되었습니다.");
        }
    }

    // 관리자 모드: 단어 추가 (시트 연동 로직은 기존 Apps Script와 동일하게 구성 필요)
    function addWord() {
        const word = document.getElementById('wordInput').value;
        const mean = document.getElementById('meanInput').value;
        if (word && mean) {
            // 여기에 구글 시트 추가 API 호출 로직 추가 가능
            alert(`단어 추가 완료: ${word}`);
            vocabularyData.push([word, mean]);
            renderAdminList();
            updateStats();
        }
    }

    // 관리자 모드: 단어 삭제 목록 출력
    function renderAdminList() {
        const area = document.getElementById('adminWordList');
        let html = "<h3>단어 삭제 관리</h3><table>";
        vocabularyData.forEach((row, index) => {
            html += `<tr><td>${row[0]}</td><td><button class="delete-btn" onclick="deleteWord(${index})">삭제</button></td></tr>`;
        });
        html += "</table>";
        area.innerHTML = html;
    }

    function deleteWord(index) {
        if (confirm("정말 삭제하시겠습니까?")) {
            vocabularyData.splice(index, 1);
            renderAdminList();
            updateStats();
        }
    }

    // 페이지 시작 시 실행
    window.onload = fetchWords;
</script>

</body>
</html>
